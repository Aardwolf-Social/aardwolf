@use gettext::Catalog;
@use gettext_macros::i18n;

@use crate::{PostNew, templates::elements::{alert, input_select, input_text, input_textarea}};

@(catalog: &Catalog, username: &str, post_new: &PostNew)

<article class="media"><!-- Begin new post -->
    <figure class="media-left">
        <p class="image is-64x64">
        <img src="https://bulma.io/images/placeholders/128x128.png" alt="@username">
        </p>
    </figure>
    <div class="media-content">
        <form method="POST" action="/posts/create">
            @if let Some(ref a) = post_new.alert {
                @:alert(a)
            }
            <input type="hidden" name="csrf_token" value="@new_post.csrf">
            @:input_textarea(&post_new.source)
            @:input_select(&post_new.visibility)
            @:input_text(&post_new.name)
            <button>@i18n!(catalog, "Awoo!")</button>
        </form>
    </div>
</article><!-- End of new post -->
